==29858== drd, a thread error detector
==29858== Copyright (C) 2006-2017, and GNU GPL'd, by Bart Van Assche.
==29858== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==29858== Command: _build/default/one_ref.exe
==29858== 
==29858== Warning: client switching stacks?  SP change: 0x1ffefff9b0 --> 0x5a32b98
==29858==          to suppress, use: --max-stackframe=137327595032 or greater
==29858== Warning: client switching stacks?  SP change: 0x5a32b80 --> 0x1ffefff9a8
==29858==          to suppress, use: --max-stackframe=137327595048 or greater
==29858== Warning: client switching stacks?  SP change: 0x1ffefff9b0 --> 0x5a32b80
==29858==          to suppress, use: --max-stackframe=137327595056 or greater
==29858==          further instances of this message will not be shown.
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x18EA2D: atomic_load_acq (platform.h:36)
==29858==    by 0x18EA2D: caml_handle_gc_interrupt (domain.c:863)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x18EB12: atomic_load_acq (platform.h:36)
==29858==    by 0x18EB12: caml_handle_gc_interrupt (domain.c:866)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x18EB0D: caml_handle_gc_interrupt (domain.c:868)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x003ce860 size 8
==29858==    at 0x18E958: atomic_store_rel (platform.h:40)
==29858==    by 0x18E958: caml_acknowledge_interrupt (domain.c:1071)
==29858==    by 0x18E958: stw_handler (domain.c:655)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x18D505: atomic_load_acq (platform.h:36)
==29858==    by 0x18D505: caml_wait_interrupt_acknowledged (domain.c:1242)
==29858==    by 0x18E7CC: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Thread 2:
==29858== Conflicting load by thread 2 at 0x003ce860 size 8
==29858==    at 0x18D505: atomic_load_acq (platform.h:36)
==29858==    by 0x18D505: caml_wait_interrupt_acknowledged (domain.c:1242)
==29858==    by 0x18E7CC: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18CFEF: caml_plat_unlock (platform.h:158)
==29858==    by 0x18CFEF: handle_incoming (domain.c:1058)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Other segment end (thread 1)
==29858==    at 0x18E98F: atomic_load_acq (platform.h:36)
==29858==    by 0x18E98F: stw_handler (domain.c:658)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x003ce830 size 8
==29858==    at 0x18E814: caml_try_run_on_all_domains_with_spin_work (domain.c:802)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18CFEF: caml_plat_unlock (platform.h:158)
==29858==    by 0x18CFEF: handle_incoming (domain.c:1058)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Other segment end (thread 1)
==29858==    at 0x18E98F: atomic_load_acq (platform.h:36)
==29858==    by 0x18E98F: stw_handler (domain.c:658)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x003ce800 size 8
==29858==    at 0x18E84D: atomic_store_rel (platform.h:40)
==29858==    by 0x18E84D: caml_try_run_on_all_domains_with_spin_work (domain.c:807)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18CFEF: caml_plat_unlock (platform.h:158)
==29858==    by 0x18CFEF: handle_incoming (domain.c:1058)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Other segment end (thread 1)
==29858==    at 0x18E98F: atomic_load_acq (platform.h:36)
==29858==    by 0x18E98F: stw_handler (domain.c:658)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== 
==29858== Thread 1:
==29858== Conflicting load by thread 1 at 0x003ce800 size 8
==29858==    at 0x18E98F: atomic_load_acq (platform.h:36)
==29858==    by 0x18E98F: stw_handler (domain.c:658)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173A7C: oldify_one (minor_gc.c:337)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce824 size 4
==29858==    at 0x18E9AE: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173A7C: oldify_one (minor_gc.c:337)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce818 size 8
==29858==    at 0x18E9B4: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173A7C: oldify_one (minor_gc.c:337)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce810 size 8
==29858==    at 0x18E9BE: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173A7C: oldify_one (minor_gc.c:337)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== 
==29858== Conflicting load by thread 1 at 0x003cf850 size 8
==29858==    at 0x1744F3: caml_stw_empty_minor_heap (minor_gc.c:696)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003cf850 size 8
==29858==    at 0x174300: caml_empty_minor_heap_promote (minor_gc.c:547)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003cf850 size 8
==29858==    at 0x174382: caml_empty_minor_heap_promote (minor_gc.c:558)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x05a124e8 size 8
==29858==    at 0x173EE1: clear_table (minor_gc.c:86)
==29858==    by 0x173EE1: caml_empty_minor_heap_domain_clear (minor_gc.c:511)
==29858==    by 0x17457D: caml_stw_empty_minor_heap (minor_gc.c:720)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Address 0x5a124e8 is at offset 24 from 0x5a124d0. Allocation context:
==29858==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x173D3D: caml_alloc_minor_tables (minor_gc.c:92)
==29858==    by 0x18D80E: create_domain (domain.c:259)
==29858==    by 0x18DE91: caml_init_domains (domain.c:364)
==29858==    by 0x18FCB5: caml_startup_common (startup_nat.c:117)
==29858==    by 0x18FE77: caml_startup_exn (startup_nat.c:143)
==29858==    by 0x18FE77: caml_main (startup_nat.c:148)
==29858==    by 0x143EBB: main (main.c:44)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ac578 size 8
==29858==    at 0x146F53: camlDune__exe__One_ref__entry (one_ref.ml:8)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: Data section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x040affb8 size 8
==29858==    at 0x146F56: camlDune__exe__One_ref__entry (one_ref.ml:3)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x040affb8 size 8
==29858==    at 0x146F56: camlDune__exe__One_ref__entry (one_ref.ml:3)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003b52a0 size 8
==29858==    at 0x146F61: camlDune__exe__One_ref__entry (one_ref.ml:9)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: Data section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x040bffc8 size 8
==29858==    at 0x1522D0: camlStdlib__array__iter_145 (array.ml:95)
==29858==    by 0x146F69: camlDune__exe__One_ref__entry (one_ref.ml:9)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x040bffd8 size 8
==29858==    at 0x1561A5: camlStdlib__domain__join_206 (domain.ml:87)
==29858==    by 0x1522D4: camlStdlib__array__iter_145 (array.ml:95)
==29858==    by 0x146F69: camlDune__exe__One_ref__entry (one_ref.ml:9)
==29858==    by 0x1440F3: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x18F986: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x101000000 size 8
==29858==    at 0x18D421: atomic_store_rel (platform.h:40)
==29858==    by 0x18D421: caml_send_partial_interrupt (domain.c:1280)
==29858==    by 0x18EB7C: caml_send_interrupt (domain.c:1291)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Thread 2:
==29858== Conflicting store by thread 2 at 0x05b67378 size 8
==29858==    at 0x173EE1: clear_table (minor_gc.c:86)
==29858==    by 0x173EE1: caml_empty_minor_heap_domain_clear (minor_gc.c:511)
==29858==    by 0x17457D: caml_stw_empty_minor_heap (minor_gc.c:720)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Address 0x5b67378 is at offset 24 from 0x5b67360. Allocation context:
==29858==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x173D3D: caml_alloc_minor_tables (minor_gc.c:92)
==29858==    by 0x18D80E: create_domain (domain.c:259)
==29858==    by 0x18D96E: domain_thread_func (domain.c:457)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D027: caml_plat_lock (platform.h:139)
==29858==    by 0x18D027: handle_incoming (domain.c:1063)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== 
==29858== Thread 1:
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x18D4F9: handle_incoming_otherwise_relax (domain.c:1219)
==29858==    by 0x18D4F9: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x003ce860 size 8
==29858==    at 0x18E958: atomic_store_rel (platform.h:40)
==29858==    by 0x18E958: caml_acknowledge_interrupt (domain.c:1071)
==29858==    by 0x18E958: stw_handler (domain.c:655)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x18D4D2: caml_wait_interrupt_acknowledged (domain.c:1235)
==29858==    by 0x18E7CC: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Thread 2:
==29858== Conflicting load by thread 2 at 0x003ce860 size 8
==29858==    at 0x18D4D7: atomic_load_acq (platform.h:36)
==29858==    by 0x18D4D7: caml_wait_interrupt_acknowledged (domain.c:1236)
==29858==    by 0x18E7CC: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 1)
==29858==    at 0x5730A31: clone (clone.S:78)
==29858==    by 0x4C368C8: pthread_create@* (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D112: install_backup_thread (domain.c:442)
==29858==    by 0x18E042: caml_domain_spawn (domain.c:522)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B27: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x1891F7: caml_plat_lock (platform.h:139)
==29858==    by 0x1891F7: pool_acquire (shared_heap.c:146)
==29858==    by 0x1891F7: pool_find (shared_heap.c:329)
==29858==    by 0x1891F7: pool_allocate (shared_heap.c:345)
==29858==    by 0x1891F7: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18CFEF: caml_plat_unlock (platform.h:158)
==29858==    by 0x18CFEF: handle_incoming (domain.c:1058)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x173690: caml_do_opportunistic_major_slice (minor_gc.c:738)
==29858==    by 0x18E98C: stw_handler (domain.c:663)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x003ce838 size 8
==29858==    at 0x18E82E: caml_try_run_on_all_domains_with_spin_work (domain.c:803)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18CFEF: caml_plat_unlock (platform.h:158)
==29858==    by 0x18CFEF: handle_incoming (domain.c:1058)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x173690: caml_do_opportunistic_major_slice (minor_gc.c:738)
==29858==    by 0x18E98C: stw_handler (domain.c:663)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x101000000 size 8
==29858==    at 0x17418E: atomic_store_rel (platform.h:40)
==29858==    by 0x17418E: caml_empty_minor_heap_promote (minor_gc.c:660)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18EB7C: caml_send_interrupt (domain.c:1291)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18EB7C: caml_send_interrupt (domain.c:1291)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Thread 1:
==29858== Conflicting load by thread 1 at 0x003ce800 size 8
==29858==    at 0x18E98F: atomic_load_acq (platform.h:36)
==29858==    by 0x18E98F: stw_handler (domain.c:658)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce824 size 4
==29858==    at 0x18E9AE: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce818 size 8
==29858==    at 0x18E9B4: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce810 size 8
==29858==    at 0x18E9BE: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003cf850 size 8
==29858==    at 0x1744F3: caml_stw_empty_minor_heap (minor_gc.c:696)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting store by thread 1 at 0x100000000 size 8
==29858==    at 0x17418E: atomic_store_rel (platform.h:40)
==29858==    by 0x17418E: caml_empty_minor_heap_promote (minor_gc.c:660)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce808 size 8
==29858==    at 0x18D2E0: decrement_stw_domains_still_processing (domain.c:638)
==29858==    by 0x18E9CA: stw_handler (domain.c:675)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x003ce820 size 4
==29858==    at 0x18E9CB: stw_handler (domain.c:677)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D43F: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D43F: caml_send_partial_interrupt (domain.c:1261)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x174542: caml_stw_empty_minor_heap (minor_gc.c:711)
==29858==    by 0x18E866: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Thread 2:
==29858== Conflicting store by thread 2 at 0x05b67378 size 8
==29858==    at 0x173DBD: reset_table (minor_gc.c:81)
==29858==    by 0x173DBD: reset_minor_tables (minor_gc.c:101)
==29858==    by 0x173E78: caml_free_minor_tables (minor_gc.c:110)
==29858==    by 0x18DBE8: domain_terminate (domain.c:1183)
==29858==    by 0x18DBE8: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Address 0x5b67378 is at offset 24 from 0x5b67360. Allocation context:
==29858==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x173D3D: caml_alloc_minor_tables (minor_gc.c:92)
==29858==    by 0x18D80E: create_domain (domain.c:259)
==29858==    by 0x18D96E: domain_thread_func (domain.c:457)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x189234: caml_plat_unlock (platform.h:158)
==29858==    by 0x189234: pool_acquire (shared_heap.c:164)
==29858==    by 0x189234: pool_find (shared_heap.c:329)
==29858==    by 0x189234: pool_allocate (shared_heap.c:345)
==29858==    by 0x189234: caml_shared_try_alloc (shared_heap.c:388)
==29858==    by 0x1735B7: alloc_shared (minor_gc.c:147)
==29858==    by 0x173913: oldify_one (minor_gc.c:308)
==29858==    by 0x174417: caml_empty_minor_heap_promote (minor_gc.c:580)
==29858==    by 0x174525: caml_stw_empty_minor_heap (minor_gc.c:706)
==29858==    by 0x18E9C3: stw_handler (domain.c:670)
==29858==    by 0x18D01F: handle_incoming (domain.c:1061)
==29858==    by 0x18E5E4: caml_handle_incoming_interrupts (domain.c:1212)
==29858==    by 0x18EB2B: caml_handle_gc_interrupt (domain.c:871)
==29858==    by 0x16FF78: caml_garbage_collection (signals_nat.c:68)
==29858==    by 0x18F5DA: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858== Other segment end (thread 1)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18EB7C: caml_send_interrupt (domain.c:1291)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment start (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D027: caml_plat_lock (platform.h:139)
==29858==    by 0x18D027: handle_incoming (domain.c:1063)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment start (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D027: caml_plat_lock (platform.h:139)
==29858==    by 0x18D027: handle_incoming (domain.c:1063)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x05b67360 size 8
==29858==    at 0x173DC5: reset_table (minor_gc.c:81)
==29858==    by 0x173DC5: reset_minor_tables (minor_gc.c:101)
==29858==    by 0x173E78: caml_free_minor_tables (minor_gc.c:110)
==29858==    by 0x18DBE8: domain_terminate (domain.c:1183)
==29858==    by 0x18DBE8: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Address 0x5b67360 is at offset 0 from 0x5b67360. Allocation context:
==29858==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x173D3D: caml_alloc_minor_tables (minor_gc.c:92)
==29858==    by 0x18D80E: create_domain (domain.c:259)
==29858==    by 0x18D96E: domain_thread_func (domain.c:457)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D027: caml_plat_lock (platform.h:139)
==29858==    by 0x18D027: handle_incoming (domain.c:1063)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Conflicting store by thread 2 at 0x101000048 size 8
==29858==    at 0x18DBE9: domain_terminate (domain.c:1184)
==29858==    by 0x18DBE9: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Allocation context: unknown.
==29858== Other segment start (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D516: caml_plat_lock (platform.h:139)
==29858==    by 0x18D516: handle_incoming_otherwise_relax (domain.c:1220)
==29858==    by 0x18D516: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== Other segment end (thread 1)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D027: caml_plat_lock (platform.h:139)
==29858==    by 0x18D027: handle_incoming (domain.c:1063)
==29858==    by 0x18D522: handle_incoming_otherwise_relax (domain.c:1221)
==29858==    by 0x18D522: caml_wait_interrupt_acknowledged (domain.c:1243)
==29858==    by 0x18EB8B: caml_send_interrupt (domain.c:1293)
==29858==    by 0x18EE5E: caml_ml_domain_interrupt (domain.c:1366)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B17: ???
==29858== 
==29858== Thread 1:
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x1756A7: caml_alloc (alloc.c:43)
==29858==    by 0x176981: caml_alloc_string (alloc.c:193)
==29858==    by 0x1769E0: caml_alloc_initialized_string (alloc.c:204)
==29858==    by 0x17A83A: caml_alloc_sprintf (str.c:410)
==29858==    by 0x177B61: caml_format_int (ints.c:182)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B37: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x1756A7: caml_alloc (alloc.c:43)
==29858==    by 0x18675A: alloc_custom_gen.isra.0 (custom.c:50)
==29858==    by 0x17BF65: caml_alloc_channel (io.c:459)
==29858==    by 0x17BF65: caml_ml_out_channels_list (io.c:505)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B57: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
==29858== Conflicting load by thread 1 at 0x100000000 size 8
==29858==    at 0x1756A7: caml_alloc (alloc.c:43)
==29858==    by 0x17BF84: caml_ml_out_channels_list (io.c:507)
==29858==    by 0x18F89E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_ref.exe)
==29858==    by 0x5A2AB9F: ???
==29858==    by 0x5A32B57: ???
==29858== Allocation context: unknown.
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment start (thread 2)
==29858==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D419: caml_plat_unlock (platform.h:158)
==29858==    by 0x18D419: caml_send_partial_interrupt (domain.c:1278)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== Other segment end (thread 2)
==29858==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x18D3CA: caml_plat_lock (platform.h:139)
==29858==    by 0x18D3CA: caml_send_partial_interrupt (domain.c:1259)
==29858==    by 0x18E762: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29858==    by 0x174677: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29858==    by 0x174696: caml_empty_minor_heaps_once (minor_gc.c:776)
==29858==    by 0x18DA82: domain_terminate (domain.c:1143)
==29858==    by 0x18DA82: domain_thread_func (domain.c:477)
==29858==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29858==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29858==    by 0x5730A3E: clone (clone.S:95)
==29858== 
2
==29858== 
==29858== For counts of detected and suppressed errors, rerun with: -v
==29858== ERROR SUMMARY: 1031 errors from 42 contexts (suppressed: 12 from 8)
