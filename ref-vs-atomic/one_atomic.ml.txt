==29660== drd, a thread error detector
==29660== Copyright (C) 2006-2017, and GNU GPL'd, by Bart Van Assche.
==29660== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==29660== Command: _build/default/one_atomic.exe
==29660== 
==29660== Warning: client switching stacks?  SP change: 0x1ffefff9b0 --> 0x5a32bc8
==29660==          to suppress, use: --max-stackframe=137327594984 or greater
==29660== Warning: client switching stacks?  SP change: 0x5a32bb0 --> 0x1ffefff9a8
==29660==          to suppress, use: --max-stackframe=137327595000 or greater
==29660== Warning: client switching stacks?  SP change: 0x1ffefff9b0 --> 0x5a32bb0
==29660==          to suppress, use: --max-stackframe=137327595008 or greater
==29660==          further instances of this message will not be shown.
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x18EFDD: atomic_load_acq (platform.h:36)
==29660==    by 0x18EFDD: caml_handle_gc_interrupt (domain.c:863)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x18F0C2: atomic_load_acq (platform.h:36)
==29660==    by 0x18F0C2: caml_handle_gc_interrupt (domain.c:866)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x18F0BD: caml_handle_gc_interrupt (domain.c:868)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting store by thread 1 at 0x003ce980 size 8
==29660==    at 0x18EF08: atomic_store_rel (platform.h:40)
==29660==    by 0x18EF08: caml_acknowledge_interrupt (domain.c:1071)
==29660==    by 0x18EF08: stw_handler (domain.c:655)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x18DAB5: atomic_load_acq (platform.h:36)
==29660==    by 0x18DAB5: caml_wait_interrupt_acknowledged (domain.c:1242)
==29660==    by 0x18ED7C: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Thread 2:
==29660== Conflicting load by thread 2 at 0x003ce980 size 8
==29660==    at 0x18DAB5: atomic_load_acq (platform.h:36)
==29660==    by 0x18DAB5: caml_wait_interrupt_acknowledged (domain.c:1242)
==29660==    by 0x18ED7C: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D59F: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D59F: handle_incoming (domain.c:1058)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Other segment end (thread 1)
==29660==    at 0x18EF3F: atomic_load_acq (platform.h:36)
==29660==    by 0x18EF3F: stw_handler (domain.c:658)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x003ce950 size 8
==29660==    at 0x18EDC4: caml_try_run_on_all_domains_with_spin_work (domain.c:802)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D59F: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D59F: handle_incoming (domain.c:1058)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Other segment end (thread 1)
==29660==    at 0x18EF3F: atomic_load_acq (platform.h:36)
==29660==    by 0x18EF3F: stw_handler (domain.c:658)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x003ce920 size 8
==29660==    at 0x18EDFD: atomic_store_rel (platform.h:40)
==29660==    by 0x18EDFD: caml_try_run_on_all_domains_with_spin_work (domain.c:807)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D59F: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D59F: handle_incoming (domain.c:1058)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Other segment end (thread 1)
==29660==    at 0x18EF3F: atomic_load_acq (platform.h:36)
==29660==    by 0x18EF3F: stw_handler (domain.c:658)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== 
==29660== Thread 1:
==29660== Conflicting load by thread 1 at 0x003ce920 size 8
==29660==    at 0x18EF3F: atomic_load_acq (platform.h:36)
==29660==    by 0x18EF3F: stw_handler (domain.c:658)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x17402C: oldify_one (minor_gc.c:337)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce944 size 4
==29660==    at 0x18EF5E: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x17402C: oldify_one (minor_gc.c:337)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce938 size 8
==29660==    at 0x18EF64: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x17402C: oldify_one (minor_gc.c:337)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce930 size 8
==29660==    at 0x18EF6E: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x17402C: oldify_one (minor_gc.c:337)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== 
==29660== Conflicting load by thread 1 at 0x003cf970 size 8
==29660==    at 0x174AA3: caml_stw_empty_minor_heap (minor_gc.c:696)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003cf970 size 8
==29660==    at 0x1748B0: caml_empty_minor_heap_promote (minor_gc.c:547)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003cf970 size 8
==29660==    at 0x174932: caml_empty_minor_heap_promote (minor_gc.c:558)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting store by thread 1 at 0x05a12518 size 8
==29660==    at 0x174491: clear_table (minor_gc.c:86)
==29660==    by 0x174491: caml_empty_minor_heap_domain_clear (minor_gc.c:511)
==29660==    by 0x174B2D: caml_stw_empty_minor_heap (minor_gc.c:720)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Address 0x5a12518 is at offset 24 from 0x5a12500. Allocation context:
==29660==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1742ED: caml_alloc_minor_tables (minor_gc.c:92)
==29660==    by 0x18DDBE: create_domain (domain.c:259)
==29660==    by 0x18E441: caml_init_domains (domain.c:364)
==29660==    by 0x190265: caml_startup_common (startup_nat.c:117)
==29660==    by 0x190427: caml_startup_exn (startup_nat.c:143)
==29660==    by 0x190427: caml_main (startup_nat.c:148)
==29660==    by 0x1442BB: main (main.c:44)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ac5c8 size 8
==29660==    at 0x147383: camlDune__exe__One_atomic__entry (one_atomic.ml:7)
==29660==    by 0x144503: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x18FF36: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Allocation context: Data section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x040affb8 size 8
==29660==    at 0x175314: caml_atomic_fetch_add (memory.c:305)
==29660==    by 0x147396: camlDune__exe__One_atomic__entry (atomic.ml:12)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B67: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003b53b8 size 8
==29660==    at 0x1473A1: camlDune__exe__One_atomic__entry (one_atomic.ml:8)
==29660==    by 0x144503: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x18FF36: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Allocation context: Data section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x040bffc8 size 8
==29660==    at 0x152880: camlStdlib__array__iter_145 (array.ml:95)
==29660==    by 0x1473A9: camlDune__exe__One_atomic__entry (one_atomic.ml:8)
==29660==    by 0x144503: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x18FF36: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x040bffd8 size 8
==29660==    at 0x156755: camlStdlib__domain__join_206 (domain.ml:87)
==29660==    by 0x152884: camlStdlib__array__iter_145 (array.ml:95)
==29660==    by 0x1473A9: camlDune__exe__One_atomic__entry (one_atomic.ml:8)
==29660==    by 0x144503: caml_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x18FF36: caml_start_program (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting store by thread 1 at 0x101000000 size 8
==29660==    at 0x18D9D1: atomic_store_rel (platform.h:40)
==29660==    by 0x18D9D1: caml_send_partial_interrupt (domain.c:1280)
==29660==    by 0x18F12C: caml_send_interrupt (domain.c:1291)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Thread 2:
==29660== Conflicting store by thread 2 at 0x05b673a8 size 8
==29660==    at 0x174491: clear_table (minor_gc.c:86)
==29660==    by 0x174491: caml_empty_minor_heap_domain_clear (minor_gc.c:511)
==29660==    by 0x174B2D: caml_stw_empty_minor_heap (minor_gc.c:720)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Address 0x5b673a8 is at offset 24 from 0x5b67390. Allocation context:
==29660==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1742ED: caml_alloc_minor_tables (minor_gc.c:92)
==29660==    by 0x18DDBE: create_domain (domain.c:259)
==29660==    by 0x18DF1E: domain_thread_func (domain.c:457)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D5D7: caml_plat_lock (platform.h:139)
==29660==    by 0x18D5D7: handle_incoming (domain.c:1063)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== 
==29660== Thread 1:
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x18DAA9: handle_incoming_otherwise_relax (domain.c:1219)
==29660==    by 0x18DAA9: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting store by thread 1 at 0x003ce980 size 8
==29660==    at 0x18EF08: atomic_store_rel (platform.h:40)
==29660==    by 0x18EF08: caml_acknowledge_interrupt (domain.c:1071)
==29660==    by 0x18EF08: stw_handler (domain.c:655)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x18DA82: caml_wait_interrupt_acknowledged (domain.c:1235)
==29660==    by 0x18ED7C: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Thread 2:
==29660== Conflicting load by thread 2 at 0x003ce980 size 8
==29660==    at 0x18DA87: atomic_load_acq (platform.h:36)
==29660==    by 0x18DA87: caml_wait_interrupt_acknowledged (domain.c:1236)
==29660==    by 0x18ED7C: caml_try_run_on_all_domains_with_spin_work (domain.c:788)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 1)
==29660==    at 0x5730A31: clone (clone.S:78)
==29660==    by 0x4C368C8: pthread_create@* (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D6C2: install_backup_thread (domain.c:442)
==29660==    by 0x18E5F2: caml_domain_spawn (domain.c:522)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B57: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897A7: caml_plat_lock (platform.h:139)
==29660==    by 0x1897A7: pool_acquire (shared_heap.c:146)
==29660==    by 0x1897A7: pool_find (shared_heap.c:329)
==29660==    by 0x1897A7: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897A7: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D59F: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D59F: handle_incoming (domain.c:1058)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x173C40: caml_do_opportunistic_major_slice (minor_gc.c:738)
==29660==    by 0x18EF3C: stw_handler (domain.c:663)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x003ce958 size 8
==29660==    at 0x18EDDE: caml_try_run_on_all_domains_with_spin_work (domain.c:803)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D59F: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D59F: handle_incoming (domain.c:1058)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x173C40: caml_do_opportunistic_major_slice (minor_gc.c:738)
==29660==    by 0x18EF3C: stw_handler (domain.c:663)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x101000000 size 8
==29660==    at 0x17473E: atomic_store_rel (platform.h:40)
==29660==    by 0x17473E: caml_empty_minor_heap_promote (minor_gc.c:660)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: unknown.
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18F12C: caml_send_interrupt (domain.c:1291)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18F12C: caml_send_interrupt (domain.c:1291)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Thread 1:
==29660== Conflicting load by thread 1 at 0x003ce920 size 8
==29660==    at 0x18EF3F: atomic_load_acq (platform.h:36)
==29660==    by 0x18EF3F: stw_handler (domain.c:658)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce944 size 4
==29660==    at 0x18EF5E: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce938 size 8
==29660==    at 0x18EF64: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce930 size 8
==29660==    at 0x18EF6E: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003cf970 size 8
==29660==    at 0x174AA3: caml_stw_empty_minor_heap (minor_gc.c:696)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting store by thread 1 at 0x100000000 size 8
==29660==    at 0x17473E: atomic_store_rel (platform.h:40)
==29660==    by 0x17473E: caml_empty_minor_heap_promote (minor_gc.c:660)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D97A: caml_plat_lock (platform.h:139)
==29660==    by 0x18D97A: caml_send_partial_interrupt (domain.c:1259)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce928 size 8
==29660==    at 0x18D890: decrement_stw_domains_still_processing (domain.c:638)
==29660==    by 0x18EF7A: stw_handler (domain.c:675)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Conflicting load by thread 1 at 0x003ce940 size 4
==29660==    at 0x18EF7B: stw_handler (domain.c:677)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Allocation context: BSS section of /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe
==29660== Other segment start (thread 2)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9EF: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9EF: caml_send_partial_interrupt (domain.c:1261)
==29660==    by 0x18ED12: caml_try_run_on_all_domains_with_spin_work (domain.c:776)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment end (thread 2)
==29660==    at 0x174AF2: caml_stw_empty_minor_heap (minor_gc.c:711)
==29660==    by 0x18EE16: caml_try_run_on_all_domains_with_spin_work (domain.c:812)
==29660==    by 0x174C27: caml_try_stw_empty_minor_heap_on_all_domains (minor_gc.c:757)
==29660==    by 0x174C46: caml_empty_minor_heaps_once (minor_gc.c:776)
==29660==    by 0x18E032: domain_terminate (domain.c:1143)
==29660==    by 0x18E032: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== 
==29660== Thread 2:
==29660== Conflicting store by thread 2 at 0x05b673a8 size 8
==29660==    at 0x17436D: reset_table (minor_gc.c:81)
==29660==    by 0x17436D: reset_minor_tables (minor_gc.c:101)
==29660==    by 0x174428: caml_free_minor_tables (minor_gc.c:110)
==29660==    by 0x18E198: domain_terminate (domain.c:1183)
==29660==    by 0x18E198: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Address 0x5b673a8 is at offset 24 from 0x5b67390. Allocation context:
==29660==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1742ED: caml_alloc_minor_tables (minor_gc.c:92)
==29660==    by 0x18DDBE: create_domain (domain.c:259)
==29660==    by 0x18DF1E: domain_thread_func (domain.c:457)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment start (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1897E4: caml_plat_unlock (platform.h:158)
==29660==    by 0x1897E4: pool_acquire (shared_heap.c:164)
==29660==    by 0x1897E4: pool_find (shared_heap.c:329)
==29660==    by 0x1897E4: pool_allocate (shared_heap.c:345)
==29660==    by 0x1897E4: caml_shared_try_alloc (shared_heap.c:388)
==29660==    by 0x173B67: alloc_shared (minor_gc.c:147)
==29660==    by 0x173EC3: oldify_one (minor_gc.c:308)
==29660==    by 0x1749C7: caml_empty_minor_heap_promote (minor_gc.c:580)
==29660==    by 0x174AD5: caml_stw_empty_minor_heap (minor_gc.c:706)
==29660==    by 0x18EF73: stw_handler (domain.c:670)
==29660==    by 0x18D5CF: handle_incoming (domain.c:1061)
==29660==    by 0x18EB94: caml_handle_incoming_interrupts (domain.c:1212)
==29660==    by 0x18F0DB: caml_handle_gc_interrupt (domain.c:871)
==29660==    by 0x170528: caml_garbage_collection (signals_nat.c:68)
==29660==    by 0x18FB8A: caml_allocN (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660== Other segment end (thread 1)
==29660==    at 0x4C3A123: pthread_mutex_unlock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D9C9: caml_plat_unlock (platform.h:158)
==29660==    by 0x18D9C9: caml_send_partial_interrupt (domain.c:1278)
==29660==    by 0x18F12C: caml_send_interrupt (domain.c:1291)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment start (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D5D7: caml_plat_lock (platform.h:139)
==29660==    by 0x18D5D7: handle_incoming (domain.c:1063)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment start (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D5D7: caml_plat_lock (platform.h:139)
==29660==    by 0x18D5D7: handle_incoming (domain.c:1063)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x05b67390 size 8
==29660==    at 0x174375: reset_table (minor_gc.c:81)
==29660==    by 0x174375: reset_minor_tables (minor_gc.c:101)
==29660==    by 0x174428: caml_free_minor_tables (minor_gc.c:110)
==29660==    by 0x18E198: domain_terminate (domain.c:1183)
==29660==    by 0x18E198: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Address 0x5b67390 is at offset 0 from 0x5b67390. Allocation context:
==29660==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x1742ED: caml_alloc_minor_tables (minor_gc.c:92)
==29660==    by 0x18DDBE: create_domain (domain.c:259)
==29660==    by 0x18DF1E: domain_thread_func (domain.c:457)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Other segment start (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D5D7: caml_plat_lock (platform.h:139)
==29660==    by 0x18D5D7: handle_incoming (domain.c:1063)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Conflicting store by thread 2 at 0x101000048 size 8
==29660==    at 0x18E199: domain_terminate (domain.c:1184)
==29660==    by 0x18E199: domain_thread_func (domain.c:477)
==29660==    by 0x4C36413: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x53F76DA: start_thread (pthread_create.c:463)
==29660==    by 0x5730A3E: clone (clone.S:95)
==29660== Allocation context: unknown.
==29660== Other segment start (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18DAC6: caml_plat_lock (platform.h:139)
==29660==    by 0x18DAC6: handle_incoming_otherwise_relax (domain.c:1220)
==29660==    by 0x18DAC6: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== Other segment end (thread 1)
==29660==    at 0x4C39193: pthread_mutex_lock (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
==29660==    by 0x18D5D7: caml_plat_lock (platform.h:139)
==29660==    by 0x18D5D7: handle_incoming (domain.c:1063)
==29660==    by 0x18DAD2: handle_incoming_otherwise_relax (domain.c:1221)
==29660==    by 0x18DAD2: caml_wait_interrupt_acknowledged (domain.c:1243)
==29660==    by 0x18F13B: caml_send_interrupt (domain.c:1293)
==29660==    by 0x18F40E: caml_ml_domain_interrupt (domain.c:1366)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B47: ???
==29660== 
==29660== Thread 1:
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x175C57: caml_alloc (alloc.c:43)
==29660==    by 0x176F31: caml_alloc_string (alloc.c:193)
==29660==    by 0x176F90: caml_alloc_initialized_string (alloc.c:204)
==29660==    by 0x17ADEA: caml_alloc_sprintf (str.c:410)
==29660==    by 0x178111: caml_format_int (ints.c:182)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B67: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== 
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x175C57: caml_alloc (alloc.c:43)
==29660==    by 0x186D0A: alloc_custom_gen.isra.0 (custom.c:50)
==29660==    by 0x17C515: caml_alloc_channel (io.c:459)
==29660==    by 0x17C515: caml_ml_out_channels_list (io.c:505)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B87: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== 
==29660== Conflicting load by thread 1 at 0x100000000 size 8
==29660==    at 0x175C57: caml_alloc (alloc.c:43)
==29660==    by 0x17C534: caml_ml_out_channels_list (io.c:507)
==29660==    by 0x18FE4E: caml_c_call (in /home/sudha/ocaml/sudha/code-samples/ref-vs-atomic/_build/default/one_atomic.exe)
==29660==    by 0x5A2ABCF: ???
==29660==    by 0x5A32B87: ???
==29660== Allocation context: unknown.
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment start (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== Other segment end (thread 2)
==29660==    (thread finished, call stack no longer available)
==29660== 
2
==29660== 
==29660== For counts of detected and suppressed errors, rerun with: -v
==29660== ERROR SUMMARY: 126 errors from 41 contexts (suppressed: 16 from 12)
